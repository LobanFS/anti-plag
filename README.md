Отлично. Вот **готовый README.md на русском**, можно **копировать и вставлять целиком**.

---

# Антиплагиат — микросервисное веб-приложение

Данный проект представляет собой серверную часть веб-приложения для приёма и анализа студенческих работ с целью выявления заимствований (антиплагиат).
Система реализована в виде набора микросервисов с синхронным межсервисным взаимодействием.

---

## Архитектура системы

Система состоит из следующих компонентов:

### 1. API Gateway

**Назначение:**

* Единая точка входа для клиентов
* Маршрутизация запросов к бизнес-микросервисам
* Обработка ошибок недоступности сервисов (502 / 503)

**Функции:**

* Приём работ от студентов
* Запуск анализа
* Получение отчетов по контрольной работе

---

### 2. File Storing Service

**Назначение:**

* Хранение файлов, присланных студентами

**Функции:**

* Загрузка файлов
* Выдача файлов по `file_id`

Файлы сохраняются локально на сервере (volume Docker).

---

### 3. File Analysis Service

**Назначение:**

* Анализ присланных работ
* Хранение информации о сдачах и отчетах
* Проверка на плагиат

**Функции:**

* Создание submission (сдачи)
* Запуск анализа работы
* Формирование отчётов
* Хранение данных в PostgreSQL

---

### 4. PostgreSQL

Используется для хранения:

* данных о сдачах работ (submissions)
* результатов анализа (reports)

---

## User Flow / Технические сценарии

### Сценарий 1: Отправка работы на проверку (студент)

1. Клиент отправляет запрос:

   ```
   POST /works/{work_id}/submissions
   ```

   (multipart/form-data: файл + student_id + student_name)

2. API Gateway:

   * загружает файл в File Storing Service
   * получает `file_id`

3. API Gateway:

   * создаёт submission в File Analysis Service

4. API Gateway:

   * запускает анализ:

     ```
     POST /submissions/{submission_id}/analyze
     ```

5. File Analysis Service:

   * создаёт отчёт со статусом `PENDING`
   * проверяет работу на плагиат
   * обновляет отчёт (`COMPLETED` или `FAILED`)

6. API Gateway возвращает клиенту:

   * `submission_id`
   * `report_id`
   * статус анализа
   * флаг `is_plagiarism`
   * `details` (при наличии плагиата)

---

### Сценарий 2: Получение отчетов по работе (преподаватель)

1. Клиент отправляет запрос:

   ```
   GET /works/{work_id}/reports
   ```

2. API Gateway запрашивает данные у File Analysis Service

3. Клиент получает список отчетов по всем сдачам данной контрольной работы

---

## Алгоритм определения плагиата (MVP)

Алгоритм реализован в упрощённом виде и работает следующим образом:

1. Для текущей сдачи выбираются все более ранние сдачи по тому же `work_id`
2. Из File Storing Service скачиваются файлы текущей и предыдущих сдач
3. Для каждого файла вычисляется хэш SHA-256
4. Если найдено совпадение хэша:

   * у сдач разных студентов
   * более ранняя сдача существует
     → работа помечается как плагиат
5. В отчёт записывается информация о совпадении (`details`)

---

## API (основные эндпоинты)

### Отправка работы

```
POST /works/{work_id}/submissions
```

### Получение отчетов

```
GET /works/{work_id}/reports
```

---

## Запуск приложения

1. Убедиться, что установлен Docker и Docker Compose
2. Выполнить команду:
    ```
   docker compose up --build
   ```
3. API Gateway будет доступен по адресу:

   ```
   http://localhost:8000
   ```

Swagger-документация:

* Gateway: `http://localhost:8000/docs`

---

## Используемые технологии

* Python 3.12
* FastAPI
* SQLAlchemy
* PostgreSQL
* Docker / Docker Compose
* HTTPX

## Доступ к микросервисам (для проверки)

Для удобства проверки и отладки каждый микросервис предоставляет Swagger-документацию.

> ⚠️ Доступность напрямую зависит от проброса портов в `docker-compose.yml`.

### API Gateway

Единая точка входа для клиентов:

```
http://localhost:8000/docs
```

---

### File Storing Service

Сервис хранения файлов:

```
http://localhost:8001/docs
```

Позволяет:

* загрузить файл
* скачать файл по `file_id`

---

### File Analysis Service

Сервис анализа и проверки на плагиат:

```
http://localhost:8002/docs
```

Позволяет:

* создать submission
* запустить анализ работы
* получить отчёты по `work_id`

---

## Визуализация работы в виде облака слов

Для каждой отправленной работы доступна визуализация содержимого файла в виде облака слов.

### Как получить облако слов

1. Отправьте работу через API Gateway:
```

POST /works/{work_id}/submissions

```
2. Получите `submission_id` из ответа
3. Перейдите в Swagger File Analysis Service:
```

[http://localhost:8002/docs](http://localhost:8002/docs)

```
4. Вызовите endpoint:
```

GET /submissions/{submission_id}/wordcloud

```
5. В ответе будет возвращена ссылка `wordcloud_url`
6. Перейдите по данной ссылке в браузере — отобразится изображение облака слов

Облако слов формируется с использованием внешнего сервиса QuickChart Word Cloud API.








